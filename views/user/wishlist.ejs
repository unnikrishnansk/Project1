<%- include('userNavbar')%>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 




  <% console.log(wishData) %>
    <% console.log(wishcount) %>

      <div class="container-fluid  mt-100" >
        <div class="row">

          <% if(wishcount <1 ) { %>
            <div class="col-md-12">

              <div class="card" >
                <div class="card-header">
                  <h5>Wish</h5>
                </div>
                <div class="card-body cart" >

                  <div class="col-sm-12 empty-cart-cls text-center">
                    <img src="https://i.imgur.com/dCdflKN.png" width="130" height="130" class="img-fluid mb-4 mr-3">
                    <h3><strong>Your Wish is Empty</strong></h3>
                    <h4>Add something...! :</h4>
                    <a href="/homepage" class="btn btn-primary cart-btn-transform m-3" data-abc="true">continue
                      shopping</a>


                  </div>
                </div>
              </div>


            </div>
            <% }else{ %>


                <% if (locals.wishcount) { %>
                    <div class="mt-3">
                      <p><strong class="text-danger"><%= wishcount %> </strong> Items added in the wishlist</p>
                    </div>
                  <% } %> 


              <div class="table-responsive d-flex" >
                <table class="table flex-1" >
                  <thead>
                    <tr>
                      <th scope="col" class="h5">Wish</th>
                      <th scope="col">Item Name</th>
                      <th scope="col">Price</th>
                    </tr>
                  </thead>
                  <tbody>
                    <%wishData.length%>
                      <% let tot=1 %>
                        <% let res=0 %>
                          <% wishData.forEach((wish)=>{ %>


                            <tr>




                              <th scope="row">
                                <div class="d-flex align-items-center">
                                  <img src="/static/uploads/<%= wish.prodImage%>" class="img-fluid rounded-3"
                                    style="width: 120px;" alt="Book">

                                </div>
                              </th>


                              <td class="align-middle">
                                <p class="mb-0" style="font-weight: 500;">
                                  <%= wish.name %>
                                </p>
                              </td>

                              <td class="align-middle">
                                <p class="mb-0" style="font-weight: 500;"><span>&#8377;<%=wish.price%> </span></p>
                              </td>   

                                <td class="align-middle">
                                  <p class="mb-0" style="font-weight: 500;"><a type="btn" class="align-middle"
                                    onclick="return confirmDeleteWishlist();"
                                      href="/deletewish?product=<%=wish.productId%>" style="text-decoration: none;">
                                      REMOVE</a></p>
                                </td>

                                <td class="align-middle">
                                    <p class="mb-0" style="font-weight: 500;"><a type="btn" class="align-middle"
                                      onclick="return confirmMoveToCart();"
                                        href="/movetocart?product=<%=wish.productId%>" 
                                        style="text-decoration: none;"
                                        >
                                        MOVE TO CART</a></p>
                                  </td>

                            </tr>
                            <%})%>
                              <%console.log(res)%>
                  </tbody>
                </table>
              <% } %>
              </div>     
        </div>
      </div>

      <script>
        function confirmMoveToCart() {
            // Show a confirmation dialog using SweetAlert
            swal({
              title: "Item added",
              text: "Added To cart successfully",
              icon: "success",
            });
        }

        function   confirmDeleteWishlist() {
            // Show a confirmation dialog using SweetAlert
            swal({
              title: "Item deleted",
              text: "Deleted from Wishlist",
              icon: "success",
            });
        }

      
    </script>
    